(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{2057:function(e,t,a){Promise.resolve().then(a.bind(a,8661))},8676:function(e,t,a){"use strict";var l=a(7437),s=a(9337),n=a(1096),r=a(824),i=a(335),o=a(385);a(2265),t.Z=e=>{let{open:t=!1,children:a,setOpen:c,title:d,maxWidth:u,fullWidth:p=!0,fullScreen:v=!1,onClose:m=()=>{}}=e;return(0,l.jsxs)(n.Z,{open:t,fullWidth:p,maxWidth:u,fullScreen:v,scroll:"paper",PaperProps:{className:"modal-clara ",sx:{background:"none"}},children:[(0,l.jsxs)(r.Z,{className:"flex justify-between  pt-0 items-center px-0 h-0",children:[(0,l.jsx)("p",{className:"text-zinc-400 absolute top-2 left-2 uppercase text-xxs",children:d}),(0,l.jsx)(i.Z,{size:"small",color:"primary",className:" !absolute top-0 right-0 ",onClick:()=>{c(),m()},children:(0,l.jsx)(s.Z,{})})]}),(0,l.jsx)(o.Z,{className:" este min-h-[200px] xl:min-h-[450px] xl:!px-3 px-0 py-0 2xl:py-1 ",children:a})]})}},6831:function(e,t,a){"use strict";var l=a(7437),s=a(6548),n=a(468);a(2265),t.Z=e=>{let{onClick:t,type:a="button",color:r="success",variant:i="outlined",className:o=" md:h-fit w-full md:w-fit",loading:c,title:d}=e;return(0,l.jsx)(s.Z,{type:a,color:r,variant:i,className:o,onClick:t,children:c?(0,l.jsx)(n.Z,{className:" text-inherit",size:22}):d})}},606:function(e,t,a){"use strict";a.d(t,{H:function(){return d},a:function(){return u}});var l=a(7437),s=a(2265),n=a(8254),r=a(2649),i=a(6463),o=a(5041);let c=(0,s.createContext)(null),d=e=>{let{children:t}=e,[a,d]=(0,s.useState)(null),u=(0,i.useRouter)(),p=()=>{let e=r.Z.get("token");e&&n.Z.get("/api/getuser",{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>d(e.data.data)).catch(()=>r.Z.remove("token"))};(0,s.useEffect)(()=>{p()},[]);let v=async(e,t,a)=>{var l,s,i;try{let s=await n.Z.post("/api/login",{username:e,password:t});s.data.token&&(r.Z.set("token",s.data.token,{expires:1}),d(s.data.user),(0,o.yv)(null==s?void 0:null===(l=s.data)||void 0===l?void 0:l.message,{variant:"success"}),a&&setTimeout(()=>{p(),u.push(a)},500))}catch(e){console.log(e),(0,o.yv)(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message,{variant:"error"})}};return(0,l.jsx)(c.Provider,{value:{isAuthenticated:!!a,user:a,login:v,logout:()=>{r.Z.remove("token"),d(null),u.refresh()}},children:t})},u=()=>(0,s.useContext)(c)},1722:function(e,t,a){"use strict";a.d(t,{W:function(){return c}});var l=a(7437),s=a(4444),n=a(1705);a(2265);var r=a(606),i=a(1777),o=a(5041);let c=(0,s.Z)({palette:{mode:"light"},typography:{fontFamily:"var(--font-helvetica)",fontWeightLight:100,fontWeightRegular:300,fontWeightBold:400,fontWeightMedium:200,fontSize:11}});t.default=e=>{let{children:t}=e,a=(0,s.Z)({palette:{mode:"dark"},typography:{fontFamily:"var(--font-helvetica)",fontWeightLight:100,fontWeightRegular:300,fontWeightBold:400,fontWeightMedium:200,fontSize:11}});return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.H,{children:(0,l.jsx)(n.Z,{theme:c,children:(0,l.jsx)(i.WT,{children:(0,l.jsx)(n.Z,{theme:a,children:(0,l.jsx)(o.wT,{anchorOrigin:{vertical:"top",horizontal:"left"},className:" font-thin",children:t})})})})})})}},1369:function(e,t,a){"use strict";a.d(t,{i:function(){return i}});var l=a(2265),s=a(9039),n=a(8254),r=a(5041);let i=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,a]=(0,l.useState)([]),[i,o]=(0,l.useState)(!1),c=async()=>{try{let t=await n.Z.get(e?"/api/public/products":"/api/products"),a=t.data;if(200===t.status)return a;{let e=Error(a.message);throw e.info=a,e.status=t.status,e}}catch(e){console.log(e)}},{data:d,error:u,isLoading:p,mutate:v}=(0,s.ZP)("/api/products",c,{onErrorRetry:e=>{if(403===e.status)return}});return(0,l.useEffect)(()=>{a(d||[])},[d]),{sendProduct:async e=>{var t,a,l;o(!0);let s={...e,sellPrice:null==e?void 0:e.sell_price,margin:null==e?void 0:e.margin,purchasePrice:null==e?void 0:e.purchase_price,attributes:null==e?void 0:null===(t=e.attributes)||void 0===t?void 0:t.reduce((e,t)=>(e[t.name]=t.value,e),{}),variants:null==e?void 0:null===(a=e.variants)||void 0===a?void 0:a.map(e=>{var t;return{...e,attributes:null==e?void 0:null===(t=e.attributes)||void 0===t?void 0:t.reduce((e,t)=>(e[t.name]=t.value,e),{})}})};try{let t=(null==e?void 0:e.Mode)==="Add"?await n.Z.post("/api/product",{...s}):await n.Z.put("/api/product",{...s});if(t.status>=400)throw Error("Error al agregar producto");return(0,r.yv)(null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.message,{variant:"success"}),o(!1),v(),t}catch(e){console.log("error",e.message),o(!1);return}},getAllProducts:c,productsList:t,isLoading:p,loading:i,deleteProduct:async e=>{var t,a,l;try{let a=await n.Z.delete("/api/product",{data:{id:e}});200!==a.status?console.log("Error al eliminar el producto."):((0,r.yv)(null===(t=a.data)||void 0===t?void 0:t.message,{variant:"success"}),await v(),console.log(a))}catch(e){console.log(e),(0,r.yv)(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message,{variant:"error"})}}}}},8661:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ea}});var l=a(7437),s=a(606),n=a(2265);a(1369);var r=a(9039),i=a(8254),o=a(5041);let c=()=>{let[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)(!1),s=async()=>{let e=await i.Z.get("/api/users");console.log(e,"RES USERS");let t=e.data;if(200===e.status)return t;{let a=Error(t.message);throw a.info=t,a.status=e.status,a}},{data:c,error:d,isLoading:u,mutate:p}=(0,r.ZP)("/api/users",s,{onErrorRetry:e=>{if(403===e.status)return}});return(0,n.useEffect)(()=>{t(c||[])},[c]),{sendUser:async e=>{l(!0);try{let t=(null==e?void 0:e.Mode)==="Add"?await i.Z.post("/api/user",{...e}):await i.Z.put("/api/user",{...e,active:null==e?void 0:e.is_active,roles:[e.roles]});return l(!1),p(),t}catch(e){var t,a;(0,o.yv)(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message,{variant:"error"}),l(!1);return}},getAllUsers:s,userList:e,isLoading:u,deleteUser:async e=>{try{let t=await i.Z.delete("/api/user",{data:{id:e}});console.log(t,"RESPONSE DELETE"),(0,o.yv)(null==t?void 0:t.message,{variant:"success"})}catch(e){var t,a;(0,o.yv)(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message,{variant:"error"})}},loading:a}};var d=a(9418),u=a(2213),p=a(1549),v=a(6374),m=a(3602),h=a(335),x=a(1777),g=e=>{let{setForm:t,form:a}=e,{userList:s,deleteUser:n,loading:r}=c(),i=(0,x.N4)();return(0,l.jsxs)("div",{className:"h-3/4 w-3/4 efecto-vidrio flex flex-col",children:[(0,l.jsx)("div",{className:"  w-full flex justify-between px-2 items-center py-2",children:(0,l.jsx)(h.Z,{color:"success",onClick:()=>{t(e=>({...e,Open:!0,Mode:"Add",Title:"Nuevo usuario"}))},children:(0,l.jsx)(d.Z,{})})}),(0,l.jsxs)("div",{className:" flex flex-col p-4  flex-1",children:[(0,l.jsxs)("div",{className:" grid grid-cols-12 text-white text-xs font-light w-full border-b-[.5px] border-white/20 pb-2",children:[(0,l.jsx)("p",{className:" col-span-3",children:"Nombre"}),(0,l.jsx)("p",{className:" col-span-1",children:"Usuario"}),(0,l.jsx)("p",{className:" col-span-3",children:"Email"}),(0,l.jsx)("p",{className:" col-span-2 ",children:"Roles"}),(0,l.jsx)("p",{className:" col-span-1 text-center",children:"Activo"}),(0,l.jsx)("p",{className:" col-span-2 text-right pr-2",children:"Acciones"})]}),(0,l.jsx)("div",{className:"flex gap-3 flex-col",children:null==s?void 0:s.map((e,a)=>{let s=async()=>{i({title:"Eliminar usuario",description:"\xbfDesea eliminar el usuario: '".concat(e.username,"'? Esta accion es irreversible"),cancellationText:"Cancelar",confirmationText:"Aceptar",cancellationButtonProps:{color:"error"},confirmationButtonProps:{color:"success"}}).then(async()=>{await n(e.id)})};return(0,l.jsxs)("div",{className:"grid grid-cols-12 font-thin text-xs text-white items-baseline",children:[(0,l.jsx)("p",{className:" col-span-3",children:e.name}),(0,l.jsx)("p",{className:" col-span-1",children:e.username}),(0,l.jsx)("p",{className:" col-span-3 ",children:e.email}),(0,l.jsx)("p",{className:" col-span-2 ",children:e.roles}),(0,l.jsx)("p",{className:" col-span-1 text-white/80 text-center",children:e.is_active?(0,l.jsx)(p.Z,{fontSize:"small"}):(0,l.jsx)(u.Z,{fontSize:"small"})}),(0,l.jsxs)("div",{className:" col-span-2 flex justify-end",children:[(0,l.jsx)(h.Z,{size:"small",color:"success",onClick:()=>{t(t=>({...t,Open:!0,Mode:"Edit",Title:"Editar usuario",...e}))},children:(0,l.jsx)(v.Z,{fontSize:"small"})}),(0,l.jsx)(h.Z,{size:"small",color:"error",onClick:s,children:(0,l.jsx)(m.Z,{fontSize:"small"})})]})]},null==e?void 0:e.id)})})]})]})},f=a(8676),b=a(1705),Z=a(3983),y=a(1068),j=a(4583),N=a(1722),w=a(6831),C=a(4379),E=a(6065),k=a(2196),S=a(3950),O=a(2988),R=a(4839),M=a(6259),P=a(317),z=a(8024),A=a(1738),I=a(9281),_=a(1175),W=a(5388),F=a(8632),T=a(909),L=a(4535);let B=(0,L.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),U=(0,L.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]),V=(0,L.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var D=a(4541);function q(e){return(0,D.ZP)("MuiMenuItem",e)}let H=(0,L.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),G=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],J=e=>{let{disabled:t,dense:a,divider:l,disableGutters:s,selected:n,classes:r}=e,i=(0,M.Z)({root:["root",a&&"dense",t&&"disabled",!s&&"gutters",l&&"divider",n&&"selected"]},q,r);return(0,O.Z)({},r,i)},K=(0,z.ZP)(W.Z,{shouldForwardProp:e=>(0,A.Z)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})(e=>{let{theme:t,ownerState:a}=e;return(0,O.Z)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(H.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,P.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(H.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,P.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(H.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,P.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,P.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(H.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(H.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(B.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(B.inset)]:{marginLeft:52},["& .".concat(V.root)]:{marginTop:0,marginBottom:0},["& .".concat(V.inset)]:{paddingLeft:36},["& .".concat(U.root)]:{minWidth:36}},!a.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},a.dense&&(0,O.Z)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(U.root," svg")]:{fontSize:"1.25rem"}}))}),Q=n.forwardRef(function(e,t){let a;let s=(0,I.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:i="li",dense:o=!1,divider:c=!1,disableGutters:d=!1,focusVisibleClassName:u,role:p="menuitem",tabIndex:v,className:m}=s,h=(0,S.Z)(s,G),x=n.useContext(_.Z),g=n.useMemo(()=>({dense:o||x.dense||!1,disableGutters:d}),[x.dense,o,d]),f=n.useRef(null);(0,F.Z)(()=>{r&&f.current&&f.current.focus()},[r]);let b=(0,O.Z)({},s,{dense:g.dense,divider:c,disableGutters:d}),Z=J(s),y=(0,T.Z)(f,t);return s.disabled||(a=void 0!==v?v:-1),(0,l.jsx)(_.Z.Provider,{value:g,children:(0,l.jsx)(K,(0,O.Z)({ref:y,role:p,tabIndex:a,component:i,focusVisibleClassName:(0,R.Z)(Z.focusVisible,u),className:(0,R.Z)(Z.root,m)},h,{ownerState:b,classes:Z}))})});var X=e=>{let{value:t,onChange:a}=e,s=[{value:"ROLE_USER",label:"Usuario"},{value:"ROLE_ADMIN",label:"Administrador"},{value:"ROLE_SUPER_ADMIN",label:"SuperAdmin"}];return(0,l.jsxs)(C.Z,{children:[(0,l.jsx)(E.Z,{id:"label-role-selector",children:"Rol"}),(0,l.jsx)(k.Z,{value:t,onChange:a,label:"Rol",labelId:"label-role-selector",name:"roles",children:null==s?void 0:s.map(e=>(0,l.jsx)(Q,{value:e.value,children:e.label}))})]})},Y=e=>{let{form:t,handleChange:a,handleSubmit:s,loading:n}=e;return(0,l.jsx)("div",{className:"p-2 flex flex-col gap-4 pt-5",children:(0,l.jsxs)(b.Z,{theme:N.W,children:[(0,l.jsx)(Z.Z,{name:"name",value:null==t?void 0:t.name,onChange:a,label:"Nombre"}),(0,l.jsx)(Z.Z,{name:"image",value:null==t?void 0:t.image,onChange:a,label:"Imagen Url"}),(null==t?void 0:t.Mode)==="Add"&&(0,l.jsx)(Z.Z,{name:"username",value:null==t?void 0:t.username,onChange:a,label:"Username"}),(0,l.jsx)(Z.Z,{name:"email",value:null==t?void 0:t.email,onChange:a,label:"Email"}),(0,l.jsx)(X,{value:null==t?void 0:t.roles,onChange:a}),(null==t?void 0:t.Mode)==="Edit"&&(0,l.jsx)(Z.Z,{name:"oldPassword",value:null==t?void 0:t.oldPassword,onChange:a,label:"Contrase\xf1a actual"}),(0,l.jsx)(Z.Z,{name:"password",value:null==t?void 0:t.password,onChange:a,label:"Nueva Contrase\xf1a"}),(0,l.jsx)(y.Z,{control:(0,l.jsx)(j.Z,{checked:null==t?void 0:t.is_active,onChange:e=>{a({target:{name:"is_active",value:e.target.checked}})},name:"is_active"}),label:"Activo",className:"text-zinc-400"}),(0,l.jsx)("div",{className:" w-full flex justify-end",children:(0,l.jsx)(w.Z,{title:"Guardar",onClick:s,loading:n})})]})})},$=e=>{let{form:t,setForm:a}=e,{sendUser:s,loading:n}=c(),r=async()=>{let e=await s(t);if((null==e?void 0:e.status)<=300){var l;a({Open:!1}),(0,o.yv)(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.message,{variant:"success"})}console.log(e,"RES")};return(0,l.jsx)(f.Z,{open:null==t?void 0:t.Open,title:null==t?void 0:t.Title,setOpen:()=>a(e=>({Open:!1})),maxWidth:"xs",children:(0,l.jsx)(Y,{form:t,setForm:a,handleChange:e=>{let{name:t,value:l}=e.target;a(e=>({...e,[t]:l}))},handleSubmit:r,loading:n})})},ee=()=>{let[e,t]=(0,n.useState)({});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g,{setForm:t}),(0,l.jsx)($,{form:e,setForm:t})]})},et=a(6463),ea=()=>{let{isAuthenticated:e}=(0,s.a)(),t=(0,et.useRouter)();return e||t.push("/login"),(0,l.jsx)("div",{className:" h-full w-full flex items-center",children:(0,l.jsx)(ee,{})})}},8254:function(e,t,a){"use strict";var l=a(8472),s=a(2649);let n=l.Z.create({baseURL:"http://localhost:8000"});n.interceptors.request.use(e=>{let t=s.Z.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),t.Z=n}},function(e){e.O(0,[355,576,434,376,887,971,23,744],function(){return e(e.s=2057)}),_N_E=e.O()}]);