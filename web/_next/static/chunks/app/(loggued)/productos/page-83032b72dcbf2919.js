(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{1145:function(e,l,t){Promise.resolve().then(t.bind(t,7265))},8676:function(e,l,t){"use strict";var a=t(7437),s=t(9337),i=t(1096),n=t(824),r=t(335),o=t(385);t(2265),l.Z=e=>{let{open:l=!1,children:t,setOpen:c,title:d,maxWidth:u,fullWidth:v=!0,fullScreen:x=!1,onClose:m=()=>{}}=e;return(0,a.jsxs)(i.Z,{open:l,fullWidth:v,maxWidth:u,fullScreen:x,scroll:"paper",PaperProps:{className:"modal-clara ",sx:{background:"none"}},children:[(0,a.jsxs)(n.Z,{className:"flex justify-between  pt-0 items-center px-0 h-0",children:[(0,a.jsx)("p",{className:"text-zinc-400 absolute top-2 left-2 uppercase text-xxs",children:d}),(0,a.jsx)(r.Z,{size:"small",color:"primary",className:" !absolute top-0 right-0 ",onClick:()=>{c(),m()},children:(0,a.jsx)(s.Z,{})})]}),(0,a.jsx)(o.Z,{className:" este min-h-[200px] xl:min-h-[450px] xl:!px-3 px-0 py-0 2xl:py-1 ",children:t})]})}},6831:function(e,l,t){"use strict";var a=t(7437),s=t(6548),i=t(468);t(2265),l.Z=e=>{let{onClick:l,type:t="button",color:n="success",variant:r="outlined",className:o=" md:h-fit w-full md:w-fit",loading:c,title:d}=e;return(0,a.jsx)(s.Z,{type:t,color:n,variant:r,className:o,onClick:l,children:c?(0,a.jsx)(i.Z,{className:" text-inherit",size:22}):d})}},606:function(e,l,t){"use strict";t.d(l,{H:function(){return d},a:function(){return u}});var a=t(7437),s=t(2265),i=t(8254),n=t(2649),r=t(6463),o=t(5041);let c=(0,s.createContext)(null),d=e=>{let{children:l}=e,[t,d]=(0,s.useState)(null),u=(0,r.useRouter)(),v=()=>{let e=n.Z.get("token");e&&i.Z.get("/api/getuser",{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>d(e.data.data)).catch(()=>n.Z.remove("token"))};(0,s.useEffect)(()=>{v()},[]);let x=async(e,l,t)=>{var a,s,r;try{let s=await i.Z.post("/api/login",{username:e,password:l});s.data.token&&(n.Z.set("token",s.data.token,{expires:1}),d(s.data.user),(0,o.yv)(null==s?void 0:null===(a=s.data)||void 0===a?void 0:a.message,{variant:"success"}),t&&setTimeout(()=>{v(),u.push(t)},500))}catch(e){console.log(e),(0,o.yv)(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message,{variant:"error"})}};return(0,a.jsx)(c.Provider,{value:{isAuthenticated:!!t,user:t,login:x,logout:()=>{n.Z.remove("token"),d(null),u.refresh()}},children:l})},u=()=>(0,s.useContext)(c)},1722:function(e,l,t){"use strict";t.d(l,{W:function(){return c}});var a=t(7437),s=t(4444),i=t(1705);t(2265);var n=t(606),r=t(1777),o=t(5041);let c=(0,s.Z)({palette:{mode:"light"},typography:{fontFamily:"var(--font-helvetica)",fontWeightLight:100,fontWeightRegular:300,fontWeightBold:400,fontWeightMedium:200,fontSize:11}});l.default=e=>{let{children:l}=e,t=(0,s.Z)({palette:{mode:"dark"},typography:{fontFamily:"var(--font-helvetica)",fontWeightLight:100,fontWeightRegular:300,fontWeightBold:400,fontWeightMedium:200,fontSize:11}});return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.H,{children:(0,a.jsx)(i.Z,{theme:c,children:(0,a.jsx)(r.WT,{children:(0,a.jsx)(i.Z,{theme:t,children:(0,a.jsx)(o.wT,{anchorOrigin:{vertical:"top",horizontal:"left"},className:" font-thin",children:l})})})})})})}},7150:function(e,l,t){"use strict";t.d(l,{b:function(){return r}});var a=t(2265),s=t(9039),i=t(8254),n=t(5041);let r=()=>{let[e,l]=(0,a.useState)([]),[t,r]=(0,a.useState)(!1),o=async()=>{r(!0);let e=await i.Z.get("/api/categories"),l=e.data;if(r(!1),200===e.status)return l;{let t=Error(l.message);throw t.info=l,t.status=e.status,t}},{data:c,error:d,isLoading:u,mutate:v}=(0,s.ZP)("/api/categories",o,{onErrorRetry:e=>{if(403===e.status)return}});return(0,a.useEffect)(()=>{l(c||[])},[c]),{getAllCategories:o,updateCategory:async e=>{var l,t,a;try{let t=await i.Z.put("/api/category",{...e});return(0,n.yv)(null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.message,{variant:"success"}),v(),t}catch(e){(0,n.yv)(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message,{variant:"error"})}},deleteCategory:async e=>{var l,t,a;try{let t=await i.Z.delete("/api/category",{data:{id:e}});return(0,n.yv)(null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.message,{variant:"success"}),v(),t}catch(e){(0,n.yv)(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message,{variant:"error"})}},categoriesList:e,addCategory:async e=>{var l,t,a;r(!0);try{let t=await i.Z.post("/api/category",{...e});return(0,n.yv)(null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.message,{variant:"success"}),v(),t}catch(e){(0,n.yv)(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message,{variant:"error"})}finally{r(!1)}},isLoading:u,loading:t}}},1369:function(e,l,t){"use strict";t.d(l,{i:function(){return r}});var a=t(2265),s=t(9039),i=t(8254),n=t(5041);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[l,t]=(0,a.useState)([]),[r,o]=(0,a.useState)(!1),c=async()=>{try{let l=await i.Z.get(e?"/api/public/products":"/api/products"),t=l.data;if(200===l.status)return t;{let e=Error(t.message);throw e.info=t,e.status=l.status,e}}catch(e){console.log(e)}},{data:d,error:u,isLoading:v,mutate:x}=(0,s.ZP)("/api/products",c,{onErrorRetry:e=>{if(403===e.status)return}});return(0,a.useEffect)(()=>{t(d||[])},[d]),{sendProduct:async e=>{var l,t,a;o(!0);let s={...e,sellPrice:null==e?void 0:e.sell_price,margin:null==e?void 0:e.margin,purchasePrice:null==e?void 0:e.purchase_price,attributes:null==e?void 0:null===(l=e.attributes)||void 0===l?void 0:l.reduce((e,l)=>(e[l.name]=l.value,e),{}),variants:null==e?void 0:null===(t=e.variants)||void 0===t?void 0:t.map(e=>{var l;return{...e,attributes:null==e?void 0:null===(l=e.attributes)||void 0===l?void 0:l.reduce((e,l)=>(e[l.name]=l.value,e),{})}})};try{let l=(null==e?void 0:e.Mode)==="Add"?await i.Z.post("/api/product",{...s}):await i.Z.put("/api/product",{...s});if(l.status>=400)throw Error("Error al agregar producto");return(0,n.yv)(null==l?void 0:null===(a=l.data)||void 0===a?void 0:a.message,{variant:"success"}),o(!1),x(),l}catch(e){console.log("error",e.message),o(!1);return}},getAllProducts:c,productsList:l,isLoading:v,loading:r,deleteProduct:async e=>{var l,t,a;try{let t=await i.Z.delete("/api/product",{data:{id:e}});200!==t.status?console.log("Error al eliminar el producto."):((0,n.yv)(null===(l=t.data)||void 0===l?void 0:l.message,{variant:"success"}),await x(),console.log(t))}catch(e){console.log(e),(0,n.yv)(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message,{variant:"error"})}}}}},7265:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return $}});var a=t(7437),s=t(1369);let i=(e,l)=>null==e?void 0:e.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:l,maximumFractionDigits:l});var n=t(9418),r=t(2213),o=t(1549),c=t(6374),d=t(3602),u=t(335),v=t(1777),x=t(2265),m=e=>{var l;let{setForm:t,form:x}=e,{productsList:m,deleteProduct:h}=(0,s.i)(),p=(0,v.N4)();return(0,a.jsxs)("div",{className:"h-3/4 w-3/4 efecto-vidrio flex flex-col relative",children:[(0,a.jsx)("div",{className:"  w-full flex justify-between px-2 items-center py-2",children:(0,a.jsx)(u.Z,{color:"success",onClick:()=>{t(e=>({...e,Open:!0,Mode:"Add",Title:"Nuevo producto"}))},children:(0,a.jsx)(n.Z,{})})}),(0,a.jsxs)("div",{className:" flex flex-col p-4  h-[90%] ",children:[(0,a.jsxs)("div",{className:" grid grid-cols-12 text-white text-xs font-light w-full border-b-[.5px] border-white/20 pb-2",children:[(0,a.jsx)("p",{className:" col-span-4",children:"Nombre"}),(0,a.jsx)("p",{className:" col-span-2",children:"P.Compra"}),(0,a.jsx)("p",{className:" col-span-1 text-center w-full",children:"Margen"}),(0,a.jsx)("p",{className:" col-span-2 text-right",children:"P.Venta"}),(0,a.jsx)("p",{className:" col-span-1 text-center",children:"Activo"}),(0,a.jsx)("p",{className:" col-span-2 text-right pr-2",children:"Acciones"})]}),(0,a.jsx)("div",{className:"flex gap-3 flex-col overflow-auto h-full ",children:null==m?void 0:null===(l=m.filter(e=>!(null==e?void 0:e.is_variant)))||void 0===l?void 0:l.map((e,l)=>{let s=async()=>{p({title:"Eliminar producto",description:"\xbfDesea eliminar el producto? Esta accion es irreversible",confirmationButtonProps:{title:"Eliminar",color:"primary"},cancellationButtonProps:{title:"Cancelar",color:"error"},confirmationText:"Eliminar",cancellationText:"Cancelar"}).then(async()=>{await h(e.id)})};return(0,a.jsxs)("div",{className:"grid grid-cols-12 font-extralight text-xs text-white items-baseline",children:[(0,a.jsx)("p",{className:" col-span-4",children:e.name}),(0,a.jsx)("p",{className:" col-span-2",children:i(e.purchase_price)}),(0,a.jsx)("p",{className:" col-span-1 text-center",children:e.margin}),(0,a.jsx)("p",{className:" col-span-2 text-right",children:i(e.sell_price)}),(0,a.jsx)("p",{className:" col-span-1 text-white/80 text-center",children:e.active?(0,a.jsx)(o.Z,{fontSize:"small"}):(0,a.jsx)(r.Z,{fontSize:"small"})}),(0,a.jsxs)("div",{className:" col-span-2 flex justify-end",children:[(0,a.jsx)(u.Z,{size:"small",color:"success",onClick:()=>{t(l=>({...l,Open:!0,Mode:"Edit",Title:"Editar producto",...e}))},children:(0,a.jsx)(c.Z,{fontSize:"small"})}),(0,a.jsx)(u.Z,{size:"small",color:"error",onClick:s,children:(0,a.jsx)(d.Z,{fontSize:"small"})})]})]},null==e?void 0:e.id)})})]})]})},h=t(8676),p=t(1705),f=t(3983),j=t(6548),g=t(1722),N=t(6903),w=t(6989),y=t(4620),Z=t(9337),b=t(9039),C=t(8254);let k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,[l,t]=(0,x.useState)({}),[a,s]=(0,x.useState)(!1),[i,n]=(0,x.useState)([]),r=async()=>await C.Z.get("/api/attributes").then(async e=>{let l=e.data;if(200===e.status)return l;{let t=Error(l.message);throw t.info=l,t.status=e.status,t}}),{data:o,error:c,isLoading:d,mutate:u}=(0,b.ZP)("/api/attributes",r,{onErrorRetry:e=>{if(403===e.status)return}});return(0,x.useEffect)(()=>{var l;n((null==o?void 0:null===(l=o.data)||void 0===l?void 0:l.filter(e))||[])},[o]),(0,x.useEffect)(()=>{},[c]),{errors:l,addAttribute:async e=>(s(!0),await fetch("/api/attribute",{method:"POST",body:JSON.stringify(e)}).then(async e=>{let l=await e.json();return e.ok?l:{message:l.message,error:!0,ok:null==e?void 0:e.ok}}).finally(()=>{s(!1),u()})),loading:a,attributeList:i,validateAttribute:e=>{let l={};return(void 0===e.Name||""===e.Name)&&(l.Name="El Nombre no puede quedar vac\xedo"),(void 0===e.Address||""===e.Address)&&(l.Address="Introduzca una direcci\xf3n"),t(l),l},isLoading:d,editAttribute:async e=>(s(!0),await fetch("/api/attribute",{method:"PUT",body:JSON.stringify(e)}).then(async e=>{let l=await e.json();return e.ok?l:{message:l.message,error:!0}}).finally(()=>{s(!1),u()})),deleteAttribute:async e=>(s(!0),await fetch("/api/attribute",{method:"DELETE",body:JSON.stringify(e)}).then(async e=>{let l=await e.json();return e.ok?l:{message:l.message,error:!0}}).finally(()=>{s(!1),u()})),handleSubmit:async e=>{s(!0);let l=await fetch("/api/attribute",{method:"Add"===e.Mode?"POST":"PUT",body:JSON.stringify(e)}).then(async e=>{let l=await e.json();return e.ok?(showResponseToast({res:l,title:"Atributos",color:"success"}),l):(showResponseToast({res:l,title:"Atributos",color:"error"}),{message:l.message,error:!0})}).finally(async()=>{s(!1)});return await u(),l}}};var S=e=>{let{attributes:l,onChange:t}=e,{attributeList:s,handleSubmit:i}=k();return console.log(s,"Atributos disponibles"),(0,N.D)(),(0,a.jsxs)("div",{className:"px-2",children:[(0,a.jsxs)("span",{className:"flex w-full justify-between items-center ",children:[(0,a.jsx)("p",{className:" text-3xs text-zinc-800",children:"Atributos"}),(0,a.jsx)(u.Z,{onClick:()=>{let e=[];(null==l?void 0:l.length)>0&&(e=[...l]),e.push({name:"",value:""}),t(e)},size:"small",children:(0,a.jsx)(y.Z,{fontSize:"small"})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:null==l?void 0:l.map((e,i)=>{let n=(e,a)=>{let s=[...l];s[i][a]=e,t(s)};if(null==e||e.Options,!(null==e?void 0:e.Options)&&(null==s?void 0:s.length)>0){var r,o;null==s||null===(o=s.filter(l=>l.name===e.name))||void 0===o||null===(r=o[0])||void 0===r||r.Options}return(0,a.jsxs)("div",{className:"w-full flex gap-1 items-center  ",children:[(0,a.jsx)(w.Z,{className:"w-1/2",options:s,renderInput:e=>(0,a.jsx)(f.Z,{...e,variant:"standard",size:"small"}),getOptionLabel:e=>(null==e?void 0:e.name)?null==e?void 0:e.name:e,isOptionEqualToValue:(e,l)=>(null==e?void 0:e.name)===l,onChange:(e,l)=>{(null==l?void 0:l.Value)==="new"||n(null==l?void 0:l.name,"name")},value:e.name}),(0,a.jsx)(f.Z,{value:e.value,variant:"standard",size:"small",className:" w-1/2",onChange:e=>n(e.target.value,"value")}),(0,a.jsx)(u.Z,{size:"small",onClick:()=>{let e=[...l];null==e||e.splice(i,1),t(e)},children:(0,a.jsx)(Z.Z,{fontSize:"small"})})]})})})]})},z=t(6831),E=t(7150),O=t(1853),A=t(2174),F=t(1898),P=t(3742),_=e=>{var l;let{value:t,onChange:s}=e,{categoriesList:i}=(0,E.b)(),[n,r]=(0,x.useState)(!1),[c,d]=(0,x.useState)({}),v=e=>{var l,i,n,r;let{data:x,lvl:m}=e,h=null==t?void 0:t.some(e=>e===(null==x?void 0:x.id)),p=c["".concat(m)];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,a.jsxs)("span",{className:"flex gap-1 items-center ",children:[(0,a.jsx)(u.Z,{size:"small",onClick:()=>{let e=[...t];h?e=null==e?void 0:e.filter(e=>e!==(null==x?void 0:x.id)):e.push(x.id),s(e)},children:h?(0,a.jsx)(o.Z,{fontSize:"small"}):(0,a.jsx)(O.Z,{fontSize:"small"})}),(0,a.jsx)("p",{className:" pt-1",children:null==x?void 0:x.name})]}),(null==x?void 0:null===(l=x.children)||void 0===l?void 0:l.length)>0&&(0,a.jsx)(u.Z,{onClick:()=>{d(e=>({...e,[m]:!p}))},children:p?(0,a.jsx)(A.Z,{}):(0,a.jsx)(F.Z,{})})]}),p&&(0,a.jsx)("div",{style:{paddingLeft:"".concat((null===(n=String(m))||void 0===n?void 0:null===(i=n.split("-"))||void 0===i?void 0:i.length)*8,"px")},children:null==x?void 0:null===(r=x.children)||void 0===r?void 0:r.map((e,l)=>(0,a.jsx)(v,{data:e,lvl:"".concat(m,"-").concat(l)}))})]})};return(0,a.jsxs)("div",{className:" relative w-full ",children:[(0,a.jsxs)("div",{className:"w-full border-b border-zinc-500 flex justify-between items-end pt-4 pb-1",children:[(0,a.jsx)("p",{className:"text-3xs  absolute top-0 text-zinc-600 font-helvetica",children:"Categor\xedas"}),(0,a.jsx)("div",{className:"flex gap-1 flex-wrap",children:null==t?void 0:t.map(e=>{let l=null==i?void 0:i.find(l=>l.id===e);return(0,a.jsx)(P.Z,{label:null==l?void 0:l.name,onDelete:()=>{s([...t].filter(l=>l!==e))},size:"small",className:" font-thin"})})}),(0,a.jsx)(u.Z,{onClick:()=>r(!n),children:n?(0,a.jsx)(A.Z,{}):(0,a.jsx)(F.Z,{})})]}),(0,a.jsx)("div",{className:" bg-zinc-100 shadow w-full overflow-hidden  z-50  absolute text-zinc-800 text-xxs font-light ".concat(n?"max-h-[400px]":"max-h-0"," transition-all ease-in"),children:null===(l=i.filter(e=>!e.parent))||void 0===l?void 0:l.map((e,l)=>(0,a.jsx)(v,{data:e,lvl:l}))})]})},T=t(385),W=t(5853),R=t(1068),L=t(4583),V=t(6648),D=e=>{let{variant:l,onEditClick:t,onDeleteClick:s}=e,{active:n,description:r,images:o,sell_price:d,name:v}=l;return(0,a.jsxs)("div",{className:" text-zinc-500 text-xs font-light flex items-center p-1 efecto-vidrio rounded",children:[(0,a.jsx)("div",{className:" w-1/4",children:(0,a.jsx)(V.default,{width:70,height:70,src:(null==o?void 0:o[0])?o[0]:"/assets/product.png",className:" object-cover"})}),(0,a.jsxs)("div",{className:"w-3/4",children:[(0,a.jsxs)("div",{className:" flex justify-between items-center",children:[(0,a.jsx)("p",{className:" w-3/4",children:v}),(0,a.jsxs)("span",{children:[(0,a.jsx)(u.Z,{size:"small",color:"warning",onClick:t,children:(0,a.jsx)(c.Z,{})}),(0,a.jsx)(u.Z,{size:"small",color:"error",onClick:s,children:(0,a.jsx)(W.Z,{})})]})]}),(0,a.jsx)("p",{className:" w-full text-wrap whitespace-pre-wrap",children:r}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(R.Z,{control:(0,a.jsx)(L.Z,{checked:n,size:"small"}),label:"Activo"}),(0,a.jsx)("p",{className:" font-normal",children:i(d)})]})]})]})},M=e=>{let{open:l,setForm:t,form:s,handleSaveVariantChanges:i}=e;return(0,a.jsx)(h.Z,{open:l,title:null==s?void 0:s.Title,maxWidth:"xs",setOpen:()=>{t(e=>({...e,variantForm:{...e.variantForm,Open:!1}}))},children:(0,a.jsx)(J,{form:s,handleChange:e=>{let{name:l,value:a}=e.target;t(e=>({...e,variantForm:{...e.variantForm,[l]:a}}))},handleSave:i})})},B=e=>{var l;let{open:t,setForm:s,variants:i,form:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{open:t,setOpen:()=>s(e=>({...e,OpenVariants:!1})),title:"Variantes del producto",maxWidth:"xs",fullWidth:!0,children:(0,a.jsx)(T.Z,{children:(0,a.jsx)("div",{className:" flex flex-col gap-3",children:null==i?void 0:i.map((e,l)=>(0,a.jsx)(D,{variant:e,onEditClick:()=>{s(l=>({...l,variantForm:{...e,Open:!0,Title:"Editar Variante"}}))},onDeleteClick:()=>{}}))})})}),(0,a.jsx)(M,{open:null==n?void 0:null===(l=n.variantForm)||void 0===l?void 0:l.Open,form:null==n?void 0:n.variantForm,setForm:s,handleSaveVariantChanges:e=>{let l=[...i],t=i.findIndex(l=>l.id===e.id);-1!==t&&(l[t]=e,s(e=>({...e,variants:l,variantForm:{Open:!1}})))}})]})},I=e=>{let{images:l,onChange:t}=e;return(0,a.jsxs)("div",{className:" flex gap-2 w-full overflow-x-auto h-[190px] items-center relative text-sm pt-5 px-2 ",children:[(0,a.jsx)("p",{className:" font-helvetica  absolute top-0 left-2 text-zinc-800 text-3xs",children:"Im\xe1genes"}),null==l?void 0:l.map((e,s)=>(0,a.jsxs)("div",{className:"w-[100px] overflow-hidden relative h-[160px]  flex flex-col gap-3",children:[(0,a.jsx)(u.Z,{onClick:()=>{let e=[...l];e.splice(s,1),t(e)},className:" !absolute top-0 right-0",children:(0,a.jsx)(Z.Z,{})}),(0,a.jsx)(V.default,{width:80,height:80,src:e||"/assets/product.png",className:"w-full object-cover flex-1"}),(0,a.jsx)(f.Z,{value:e,size:"small",label:"url",onChange:e=>{let a=[...l];a[s]=e.target.value,t(a)}})]})),(0,a.jsx)("span",{className:" h-full flex items-center ",children:(0,a.jsx)(u.Z,{onClick:()=>{let e=[...l];e.push(""),t(e)},children:(0,a.jsx)(y.Z,{})})})]})},J=e=>{let{form:l,setForm:t,handleChange:s,handleSave:i}=e;return console.log(l),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"p-2 grid grid-cols-3 gap-4 pt-5",children:(0,a.jsxs)(p.Z,{theme:g.W,children:[(0,a.jsx)(f.Z,{name:"name",value:null==l?void 0:l.name,label:"Nombre",className:" col-span-3",onChange:s}),(0,a.jsx)(f.Z,{name:"description",value:null==l?void 0:l.description,label:"Descripci\xf3n",className:" col-span-3",multiline:!0,onChange:s}),!(null==l?void 0:l.is_variant)&&(0,a.jsx)("div",{className:" col-span-3 ",children:(0,a.jsx)(_,{value:(null==l?void 0:l.categories)||[],onChange:e=>{s({target:{name:"categories",value:e}})}})}),(0,a.jsx)(f.Z,{name:"purchase_price",value:null==l?void 0:l.purchase_price,label:"Precio Compra",className:" col-span-1",onChange:s}),(0,a.jsx)(f.Z,{name:"margin",value:null==l?void 0:l.margin,label:"Margen",className:" col-span-1",onChange:s}),(0,a.jsx)(f.Z,{name:"sell_price",value:null==l?void 0:l.sell_price,label:"Precio Venta",className:" col-span-1",onChange:s}),(0,a.jsx)("div",{className:" col-span-3",children:(0,a.jsx)(S,{attributes:null==l?void 0:l.attributes,onChange:e=>{s({target:{name:"attributes",value:e}})}})}),(0,a.jsx)("div",{className:" col-span-3",children:(0,a.jsx)(I,{images:null==l?void 0:l.images,onChange:e=>{s({target:{name:"images",value:e}})}})}),!(null==l?void 0:l.is_variant)&&(0,a.jsx)(j.Z,{variant:"contained",color:"info",onClick:()=>t(e=>({...e,OpenVariants:!0})),children:"Variantes"}),(0,a.jsx)(z.Z,{title:"Guardar",className:" col-end-4",color:"primary",onClick:()=>i(l)})]})})})},q=e=>{let{form:l,setForm:t}=e,{sendProduct:i}=(0,s.i)(),n=async()=>{let e=await i(l);(null==e?void 0:e.status)<300&&t({Open:!1})};return(0,a.jsxs)(h.Z,{open:null==l?void 0:l.Open,setOpen:t,maxWidth:"xs",fullWidth:!0,title:null==l?void 0:l.Title,children:[(0,a.jsx)(J,{form:l,setForm:t,handleChange:e=>{let{value:l,name:a}=e.target;t(e=>({...e,[a]:l}))},handleSave:n}),(0,a.jsx)(B,{open:null==l?void 0:l.OpenVariants,setForm:t,variants:null==l?void 0:l.variants,form:l})]})},U=()=>{let[e,l]=(0,x.useState)({});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m,{setForm:l}),(0,a.jsx)(q,{form:e,setForm:l})]})},H=e=>{var l;let{data:t}=e;return(0,a.jsxs)("div",{className:" font-helvetica text-white font-thin w-[230px] h-[300px] bg-red-200/20 overflow-hidden rounded efecto-vidrio",children:[(0,a.jsx)("div",{className:" w-full h-1/2 bg-lime-100/20",children:(0,a.jsx)(V.default,{src:null==t?void 0:null===(l=t.images)||void 0===l?void 0:l[0],width:120,height:120,alt:"imagen-".concat(null==t?void 0:t.name),className:" w-full h-full object-cover shadow-md"})}),(0,a.jsxs)("div",{className:" p-2 flex flex-col h-1/2",children:[(0,a.jsx)("p",{className:" font-light",children:null==t?void 0:t.name}),(0,a.jsx)("p",{className:" text-xxs flex-1 text-ellipsis overflow-hidden",children:null==t?void 0:t.description}),(0,a.jsx)("p",{className:" w-full flex justify-end",children:i(null==t?void 0:t.sell_price)})]})]})},G=e=>{let{onSearch:l}=e,[t,s]=(0,x.useState)(""),i=(0,x.useRef)(null);return(0,x.useEffect)(()=>(i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{l(t)},500),()=>{i.current&&clearTimeout(i.current)}),[t,l]),(0,a.jsx)(f.Z,{fullWidth:!0,value:t,onChange:e=>s(e.target.value),label:"Buscar"})},K=t(9451),Q=e=>{var l;let{onFilter:t}=e,{categoriesList:s}=(0,E.b)(),[i,n]=(0,x.useState)([]),[r,o]=(0,x.useState)({}),c=e=>{var l,t,s,d;let{data:v,nivel:x}=e,m=null==i?void 0:i.includes(null==v?void 0:v.id),h=r["".concat(x)];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"flex w-36 text-xs text-white items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex justify-start items-center",children:[(0,a.jsx)(u.Z,{onClick:()=>{let e=[...i];m?e=null==e?void 0:e.filter(e=>e!==v.id):e.push(v.id),n(e)},children:m?(0,a.jsx)(K.Z,{}):(0,a.jsx)(O.Z,{})}),(0,a.jsx)("p",{children:null==v?void 0:v.name})]}),(null==v?void 0:null===(l=v.children)||void 0===l?void 0:l.length)>0&&(0,a.jsx)(u.Z,{onClick:()=>{o(e=>({...e,[x]:!h}))},children:h?(0,a.jsx)(A.Z,{}):(0,a.jsx)(F.Z,{})})]}),(0,a.jsx)("div",{className:"".concat(h?"max-h-[900px]":"max-h-0"," transition-all ease-in overflow-hidden"),style:{paddingLeft:"".concat((null===(s=String(x))||void 0===s?void 0:null===(t=s.split("-"))||void 0===t?void 0:t.length)*8,"px")},children:null==v?void 0:null===(d=v.children)||void 0===d?void 0:d.map((e,l)=>(0,a.jsx)(c,{data:e,nivel:"".concat(x,"-").concat(l)}))})]})};return(0,x.useEffect)(()=>{t(i)},[i]),(0,a.jsx)("div",{className:"flex flex-col gap-1",children:null==s?void 0:null===(l=s.filter(e=>!(null==e?void 0:e.parent)))||void 0===l?void 0:l.map((e,l)=>(0,a.jsx)(c,{data:e,nivel:l}))})},X=()=>{let{productsList:e}=(0,s.i)(!0),[l,t]=(0,x.useState)([]),i=(0,x.useCallback)(l=>{if(l.trim()){let a=l.toLowerCase();t(e.filter(e=>(e.name.toLowerCase().includes(a)||e.description.toLowerCase().includes(a))&&!(null==e?void 0:e.is_variant)))}else t(e.filter(e=>!(null==e?void 0:e.is_variant)))},[e]);return(0,x.useEffect)(()=>{t(e)},[e]),(0,a.jsxs)("div",{className:" efecto-vidrio  w-full h-full flex flex-col gap-2 p-4",children:[(0,a.jsx)("div",{className:"w-1/3",children:(0,a.jsx)(G,{onSearch:i})}),(0,a.jsx)("div",{className:"absolute left-8 overflow-auto h-[85vh] top-20",children:(0,a.jsx)(Q,{onFilter:l=>{(null==l?void 0:l.length)>0?t(e.filter(e=>{var t;return(null==e?void 0:null===(t=e.categories)||void 0===t?void 0:t.some(e=>null==l?void 0:l.includes(e)))&&!(null==e?void 0:e.is_variant)})):t(e.filter(e=>!(null==e?void 0:e.is_variant)))}})}),(0,a.jsx)("div",{className:"grid grid-cols-3 overflow-auto gap-4",children:null==l?void 0:l.map((e,l)=>(0,a.jsx)(H,{data:e}))})]})},Y=t(606);t(6463);var $=()=>{let{isAuthenticated:e}=(0,Y.a)();return(0,a.jsx)("div",{className:" h-full w-full flex items-center",children:e?(0,a.jsx)(U,{}):(0,a.jsx)(X,{})})}},8254:function(e,l,t){"use strict";var a=t(8472),s=t(2649);let i=a.Z.create({baseURL:"http://localhost:8000"});i.interceptors.request.use(e=>{let l=s.Z.get("token");return l&&(e.headers.Authorization="Bearer ".concat(l)),e},e=>Promise.reject(e)),l.Z=i}},function(e){e.O(0,[355,576,434,648,376,887,562,971,23,744],function(){return e(e.s=1145)}),_N_E=e.O()}]);